<div id="sm-mailings" class="sm-container">

  <div class="buttons clearfix">
    <p class="left">
      <a class="button" ng-href="#/mailings/new"><i class="icon email-icon"></i>Create a New Mailing</a>
    </p>

    <p class="right">
      <a href ng-click="showFilters = !showFilters" class="button"><i class="icon settings-icon"></i>Filter</a>
    </p>
  </div>

  <div ng-show="showFilters" class="filters crm-form-block">
    <div class="filter inline">
      <p class="filter-title">Mailing status:</p>

      <input ng-model="mailingFilters.status[constants.DRAFT]" id="filter-draft-mailings" type="checkbox"/>
      <label for="filter-draft-mailings">Draft</label>

      <input ng-model="mailingFilters.status[constants.SCHEDULED]" id="filter-scheduled-mailings" type="checkbox"/>
      <label for="filter-scheduled-mailings">Scheduled</label>

      <input ng-model="mailingFilters.status[constants.PAST]" id="filter-past-mailings" type="checkbox"/>
      <label for="filter-past-mailings">Past</label>
    </div>

    <div class="filter inline">
      <p class="filter-title">Created By:</p>

      <select ui-select2 ng-model="mailingFilters.creator" data-placeholder="Created By" name="" id="">
        <option value="all">All</option>
        <option ng-repeat="creator in models.creators" value="{{creator}}">{{creator}}</option>
      </select>
    </div>
  </div>

  <table id="sm-mailings-table">
    <thead>
    <tr>
      <th class="id">ID</th>
      <th class="name">Name</th>
      <th class="subject">Subject</th>
      <th class="current-status">Status</th>
      <th class="created-by">Created By</th>
      <th class="created-date">Created Date</th>
      <th class="scheduled">Scheduled</th>
      <th class="started">Started</th>
      <th class="completed">Completed</th>
      <th class="action-buttons">Action</th>
    </tr>
    </thead>
    <tr ng-repeat="mailing in (mailings | filterMailings:mailingFilters)" ng-class-even="'even-row'"
        ng-class-odd="'odd-row'">
      <td class="id">{{mailing.id}}</td>
      <td class="name">{{mailing.name}}</td>
      <td class="subject">{{mailing.subject}}</td>
      <td class="current-status">{{mailing.status}}</td>

      <td class="created-by">{{mailing.sort_name}}</td>
      <td class="created-date">{{mailing.created_date}}</td>
      <td class="scheduled">{{mailing.scheduled_date}}</td>
      <td class="started">{{mailing.start_date}}</td>
      <td class="completed">{{mailing.end_date}}</td>

      <td class="action-buttons">
        <a ng-if="mailing.status === constants.DRAFT || mailing.status === constants.SCHEDULED"
           ng-href="#/mailings/{{mailing.id}}" class="button">
          {{mailing.status === constants.DRAFT ? 'Edit' : 'Update'}}
        </a>
        <a href ng-click="deleteMailing($index)" class="button">Delete</a>
      </td>
    </tr>
  </table>
</div>